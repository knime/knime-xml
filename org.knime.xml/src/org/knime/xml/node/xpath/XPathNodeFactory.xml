<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE knimeNode PUBLIC "-//UNIKN//DTD KNIME Node 2.0//EN" "http://www.knime.org/Node.dtd">
<knimeNode type="Manipulator" icon="./xpath.png">
    <name>XPath</name>
    <shortDescription>Performs a XPath query on a XML column.</shortDescription>
    <fullDescription>
        <intro>
            The node takes the XML Documents of the selected column and 
            performs a XPath query on them. The node supports XPath 1.0.
    <h3>XPath Examples</h3>
    Consider the XML document: 
<![CDATA[<inventory>]]><br/>
<![CDATA[    <book year="1999">]]><br/>
<![CDATA[        <title>Harry Potter and the Sorcerer's Stone</title>]]><br/>
<![CDATA[        <author>J. K. Rowling</author>]]><br/>
<!-- <![CDATA[        <isbn>0439708184</isbn>]]><br/> -->
<![CDATA[    </book>]]><br/>
<![CDATA[    <book year="2000">]]><br/>
<![CDATA[        <title>Harry Potter and the Chamber of Secrets</title>]]><br/>
<![CDATA[        <author>J. K. Rowling</author>]]><br/>
<!-- <![CDATA[        <isbn>0439064872</isbn>]]><br/> -->
<![CDATA[    </book>]]><br/>
<![CDATA[</inventory>]]><br/>
<br/>
With the  <b>Return type</b> "Node-Set" and the denoted XPath query you can get
<ul>
<li>all books : <i>//book</i></li>
<li>all author element within book :<i>//book/author</i></li>
<li>the books from 1999 : <i>//book[@year='1999']</i></li>
</ul>

<p>With the <b>Return type</b> "String" you can get the value of the first year 
attribute with <i>//@year</i>. If you want all publishing dates you can use a flow of
two XPath nodes and own Ungroup node. Use an XPath 
node with query <i>//book</i> and return type "Node-Set" then the Ungroup node followed by
an XPath with query <i>//@year</i> and return type "String".</p>

<p>You can find more examples at <a href="http://www.w3schools.com/XPath/xpath_syntax.asp">w3cschools.com</a>. </p>
       
            
		</intro>
        <option name="XML column">The column containing the XML cells.</option>
        <option name="New column name">
            Name of the new column in the output table.
        </option>
        <option name="Remove source column">
            Check when the source column should not show up in the output table.
        </option>
        <option name="XPath query">Define the XPath query here.</option>
        <option name="Return type">Choose the result type of your XPath query.
            The result type will be match to a KNIME type with this mapping.
            <ul>
              <li>Boolean -> Boolean cell type</li>
              <li>Number -> Double cell type</li>
              <li>String -> String cell type</li>
              <li>Node -> XML cell type</li>
              <li>Node-Set -> Collection cell type (Collection of XML cells)</li>  
            </ul>  
        </option>
        <option name="Namespaces">
            The prefices and the namespaces used in the XPath query. For the
            example when querying XHTML documents with the XPath Query:<br/>
            <i>//pre:h1</i><br/> 
            the following namespace must be defined:
            <br/>
            Prefix: <i>pre</i>
            <br/>
            Namespace: <i>http://www.w3.org/1999/xhtml</i>         
        </option>
        <option name="Incorporate namespace of the root element.">
            <p>This option is useful when you do not have the default
            namespace of your document at hand.</p>
        	<p>If checked, the namespace of the root element ist added to the 
        	<b>Namespaces</b> table during runtime. Please define a prefix for this 
        	namespace in <b>Prefix of root's namespace</b>.</p>
        	<p>For the example of XHTML documents the namespace of the root 
        	element is http://www.w3.org/1999/xhtml so that with the
        	root's prefix of <i>pre</i> you can leave
        	the <b>Namespaces</b> table empty.</p>     
        </option>          
    </fullDescription>

    <ports>
        <inPort index="0" name="Input Table">
            Input table containing at least one XML column.
        </inPort>
        <outPort index="0" name="Output Table">
            The input table with additional column containing the result of the XPath query.
        </outPort>        
    </ports>
</knimeNode>


